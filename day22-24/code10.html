<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>

<body>
    <script>
        var scoreObject = {
            "Tony": {
                "Math": 95,
                "English": 79,
                "Music": 68
            },
            "Simon": {
                "Math": 100,
                "English": 95,
                "Music": 98
            },
            "Annie": {
                "Math": 54,
                "English": 65,
                "Music": 88
            }
        }
        // 学习通用的数据用不同的数据结构进行存储，以及相互的转换

        // 对象转为数组
        // 如上有一个用来存储学习成绩的对象，编写一个函数，将其转为如下的二维数组

        // var scoreArray = [
        //     ["Tony", 95, 79, 68],
        //     ……
        // ];
        // 2020年7月10日21:56:13
        // 肯定有更简单的解法
        var scoreArray = [];

        // console.log(Object.keys(scoreObject));
        // console.log(Object.values(scoreObject));
        for (var key in Object.values(scoreObject)) {
            var singal = [];
            singal.push(Object.keys(scoreObject)[key]);
            singal.push(Object.values(scoreObject)[key].Math);
            singal.push(Object.values(scoreObject)[key].English);
            singal.push(Object.values(scoreObject)[key].Music);
            scoreArray.push(singal);
        }
        // console.log(scoreArray);

        // 数组转为对象：

        var menuArr = [
            [1, "Area1", -1],
            [2, "Area2", -1],
            [3, "Area1-1", 1],
            [4, "Area1-2", 1],
            [5, "Area2-1", 2],
            [6, "Area2-2", 2],
            [7, "Area1-2-3", 4],
            [8, "Area2-2-1", 6],
        ];
        // 如上有一个用来存储多级菜单数据的数组，编写一个函数，将其转为如下的对象

        var menuObject = {};
        storedata(menuArr);
        function storedata(menuArr){
            menuArr.forEach(function (ele,index,menuArr){
                var tt = {'name':ele[1]};
               if(ele[2] == -1){
                menuObject[ele[0]] =tt;
               }
             
            })
            
            
        }
        // console.log(menuObject);
function arToOb(ar) {
    var res = {}
    var fi;
    function find(ob, el) {
        if (!ob) return ;
        if (ob[el]) {fi = ob[el]; return ;}
        for (var te in ob) {
        debugger;

            if (typeof ob[te] == 'object')
                find(ob[te], el);
        }
    }
    for (var te of ar) {
        //console.log(te);
        var tt = {'name' : te[1]};
        if (te[2] == -1) 
            res[te[0]] = tt;
        else {
            find(res, te[2]);
            if (!fi['subMenu']) {
                fi['subMenu'] = {};
            }
            fi['subMenu'][te[0]] = tt;
        }
    }
    return res;
}


console.log(arToOb(menuArr));

// var menuObject = {
//     "1": {
//         name: "Area1",
//         subMenu: {
//             "3": {
//                 name: "Area1-1"
//             },
//             "4": {
//                 name: "Area1-2",
//                 subMenu: {
//                     "7": {
//                         name: "Area1-2-3"
//                     }
//                 }
//             }
//         }
//     }

//     ……

// }
    </script>
</body>

</html>